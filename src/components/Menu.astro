---
const categories: string[] = ['Pasta', 'Salads', 'Grill', 'Cake'];

const menuItems = [
  { 
    id: 1, 
    categories: ['Salads', 'Grill'], 
    name: 'Greek Salad', 
    description: 'A fresh and tasty salad', 
    price: '$7.50', 
    image: 'https://via.placeholder.com/300x300.png?text=Greek+Salad' 
  },
  { 
    id: 2, 
    categories: ['Pasta'], 
    name: 'Spaghetti Carbonara', 
    description: 'Creamy pasta with bacon', 
    price: '$9.50', 
    image: 'https://via.placeholder.com/300x300.png?text=Spaghetti+Carbonara' 
  },
  { 
    id: 3, 
    categories: ['Grill'], 
    name: 'Grilled Chicken', 
    description: 'Perfectly grilled chicken', 
    price: '$12.00', 
    image: 'https://via.placeholder.com/300x300.png?text=Grilled+Chicken' 
  },
  { 
    id: 4, 
    categories: ['Cake'], 
    name: 'Cheesecake', 
    description: 'Rich and creamy', 
    price: '$6.00', 
    image: 'https://via.placeholder.com/300x300.png?text=Cheesecake' 
  },
];
---

<div class="container mx-auto p-8">
  <h2 class="text-2xl font-bold mb-6 text-center">You may like one of our dishes:</h2>
  
  <!-- Selector de categorías -->
  <div id="category-buttons" class="flex justify-center space-x-4 mb-8">
    {categories.map(category => (
      <button 
        type="button" 
        data-category={category} 
        class="px-4 py-2 text-sm font-medium text-white focus:outline-none"
      >
        {category}
      </button>
    ))}
  </div>

  <!-- Lista de elementos del menú -->
  <div id="menu-items" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
    {menuItems.map(item => (
      <div 
        class="menu-item bg-white border p-4 rounded-lg"
        data-categories={item.categories.join(',')}
        style="display: block;" 
      >
        <div>
          <img src={item.image} alt={item.name} class="w-full h-48 object-cover mb-4"/>
          <h3 class="text-xl font-bold">{item.name}</h3>
          <p>{item.description}</p>
          <span class="block mt-2 font-semibold">{item.price}</span>
        </div>
      </div>
    ))}
  </div>
</div>

<!-- Código actualizado -->
<script>
  // Obtener los botones de categoría y los elementos del menú
  const categoryButtons = document.querySelectorAll('#category-buttons button');
  const menuItems = document.querySelectorAll('#menu-items .menu-item');

  /**
   * Filtra los elementos del menú por categoría.
   * @param {string} category - Categoría seleccionada.
   */
  function handleFilter(category: string) {
    // Actualiza la clase del botón seleccionado
    categoryButtons.forEach((button) => {
      const buttonElement = button as HTMLButtonElement; // Conversión a HTMLButtonElement
      buttonElement.classList.toggle('text-yellow-400', buttonElement.dataset.category === category);
    });

    // Filtra los elementos del menú según la categoría seleccionada
    menuItems.forEach((item) => {
      const menuItemElement = item as HTMLElement; // Conversión a HTMLElement
      const itemCategories = menuItemElement.dataset.categories?.split(',') || [];
      menuItemElement.style.display = itemCategories.includes(category) ? 'block' : 'none';
    });
  }

  // Añadir evento de clic a cada botón de categoría
  categoryButtons.forEach((button) => {
    const buttonElement = button as HTMLButtonElement; // Conversión a HTMLButtonElement
    buttonElement.addEventListener('click', () => {
      handleFilter(buttonElement.dataset.category || '');
    });
  });

  // Establecer la categoría inicial
  handleFilter('Salads');
</script>